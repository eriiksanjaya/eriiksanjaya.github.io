<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Download Links — Image & APK</title>
  <!-- Tailwind CDN (for quick prototyping) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-6">
  <main class="max-w-3xl w-full">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold text-slate-800">Download Files</h1>
      <p class="text-sm text-slate-500">Tampilan link download untuk file gambar dan APK. Data & teks di-generate dari array.</p>
    </header>

    <section id="downloads" class="space-y-4"></section>

    <template id="card-template">
      <div class="bg-white rounded-2xl shadow p-4 flex gap-4 items-center">
        <div class="w-20 h-20 flex-shrink-0 rounded-lg overflow-hidden bg-slate-100 flex items-center justify-center">
          <img alt="thumb" class="w-full h-full object-cover" />
        </div>
        <div class="flex-1">
          <div class="flex items-start justify-between">
            <div>
              <h3 class="text-lg font-medium text-slate-800"></h3>
              <p class="text-sm text-slate-500 mt-1"></p>
            </div>
            <div class="text-right">
              <div class="text-sm text-slate-500">Type</div>
              <div class="font-medium text-slate-700 mt-1"></div>
            </div>
          </div>

          <div class="mt-3 flex gap-2">
            <a class="download-btn inline-flex items-center gap-2 px-3 py-2 rounded-full bg-emerald-600 text-white text-sm shadow-sm" target="_blank" rel="noopener" download>
              <!-- icon -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5 5-5M12 15V3" />
              </svg>
              <span>Download</span>
            </a>
            <button class="hidden copy-link-btn inline-flex items-center gap-2 px-3 py-2 rounded-full border border-slate-200 text-sm text-slate-700">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3h8v4M5 11h10a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2z" />
              </svg>
              <span>Copy Link</span>
            </button>
            <button class="hidden info-btn inline-flex items-center gap-2 px-3 py-2 rounded-full border border-slate-200 text-sm text-slate-700">
              Details
            </button>
          </div>
        </div>
      </div>
    </template>

    <!-- small modal for details -->
    <div id="modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center px-4">
      <div class="bg-white rounded-xl p-5 max-w-lg w-full shadow-lg">
        <h4 class="text-lg font-semibold" id="modal-title">Details</h4>
        <p class="text-sm text-slate-600 mt-2" id="modal-body"></p>
        <div class="mt-4 text-right">
          <button id="modal-close" class="px-4 py-2 rounded-md bg-slate-100 text-slate-700">Close</button>
        </div>
      </div>
    </div>

  </main>

  <script>
    // -----------------------------
    // Data arrays: files + texts
    // -----------------------------
    const files = [
      {
        id: 'img-01',
        title: 'Image Slider 1',
        description: '',
        type: 'image',
        url: './wall-1.png',
        thumb: './wall-1.png',
        size: '1.2 MB',
        uploaded: '2025-10-24'
      },
      {
        id: 'img-02',
        title: 'Image Slider 2',
        description: '',
        type: 'image',
        url: './wall-2.png',
        thumb: './wall-2.png',
        size: '1.2 MB',
        uploaded: '2025-10-24'
      },
      {
        id: 'apk-01',
        title: 'Aplikasi Jam Masjid - Display',
        description: 'Install di Tv Box / Smart Tv Android',
        type: 'apk',
        url: 'https://example.com/files/jam-masjid-v1.0.apk',
        thumb: 'https://example.com/files/jam-masjid-thumb.png',
        size: '8.7 MB',
        uploaded: '2025-09-30'
      },
      {
        id: 'apk-02',
        title: 'Aplikasi Jam Masjid - Remote',
        description: 'Install di Smartphone',
        type: 'apk',
        url: 'https://example.com/files/jam-masjid-v1.0.apk',
        thumb: 'https://example.com/files/jam-masjid-thumb.png',
        size: '8.7 MB',
        uploaded: '2025-09-30'
      }
    ];

    // Separate array for short paragraphs/texts you want to show above/below each card
    const texts = [
      '"Sabar dan sholat" — gunakan ayat Al-Qur’an sebagai teks utama di background ini.',
      'Pastikan memberikan atribusi sesuai lisensi Freepik apabila diperlukan.',
      'Untuk APK: lakukan pengecekan keamanan sebelum instalasi di perangkat.'
    ];

    // -----------------------------
    // Render function
    // -----------------------------
    const container = document.getElementById('downloads');
    const template = document.getElementById('card-template');

    function render() {
      container.innerHTML = '';

      // render intro texts
      const intro = document.createElement('div');
      intro.className = 'mb-3 p-3 bg-white rounded-lg shadow-sm';
      intro.innerHTML = `
        <ul class="text-sm text-slate-700 space-y-1">
          ${texts.map(t => `<li>• ${escapeHtml(t)}</li>`).join('')}
        </ul>
      `;
      container.appendChild(intro);

      files.forEach(f => {
        const node = template.content.cloneNode(true);
        const card = node.querySelector('div');
        const img = node.querySelector('img');
        const title = node.querySelector('h3');
        const desc = node.querySelectorAll('p')[0];
        const typeBox = node.querySelectorAll('div')[3];
        const typeVal = node.querySelectorAll('div')[4];
        const downloadBtn = node.querySelector('.download-btn');
        const copyBtn = node.querySelector('.copy-link-btn');
        const infoBtn = node.querySelector('.info-btn');

        img.src = f.thumb;
        img.alt = f.title + ' thumbnail';
        title.textContent = f.title;
        desc.textContent = f.description;
        // show type and size
        const rightCols = card.querySelectorAll('div > div > div');
        // fallback: find the last small block to show type & size
        const right = card.querySelectorAll('div')[4];
        right.querySelector('.font-medium')?.remove?.();
        const rightText = document.createElement('div');
        rightText.className = 'font-medium text-slate-700 mt-1';
        rightText.textContent = `${f.type.toUpperCase()}`;
        right.appendChild(rightText);

        downloadBtn.href = f.url;
        downloadBtn.setAttribute('download', '');

        copyBtn.addEventListener('click', () => {
          navigator.clipboard.writeText(f.url).then(() => {
            copyBtn.textContent = 'Copied!';
            setTimeout(() => { copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3h8v4M5 11h10a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2z" /></svg> <span>Copy Link</span>'; }, 1500);
          });
        });

        infoBtn.addEventListener('click', () => showModal(f));

        container.appendChild(node);
      });
    }

    // -----------------------------
    // Modal utilities
    // -----------------------------
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalBody = document.getElementById('modal-body');
    const modalClose = document.getElementById('modal-close');

    function showModal(file) {
      modalTitle.textContent = file.title;
      modalBody.innerHTML = `
        <strong>Uploaded:</strong> ${file.uploaded} <br>
        <p class="mt-2 text-sm text-slate-600">${escapeHtml(file.description)}<br><br>
        URL: <span class="break-all text-emerald-600 underline">${file.url}</span></p>
      `;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    modalClose.addEventListener('click', () => {
      modal.classList.remove('flex');
      modal.classList.add('hidden');
    });

    // small helper to avoid XSS when inserting user-supplied text
    function escapeHtml(unsafe) {
      return String(unsafe)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // initial render
    render();

    // Expose for debugging
    window._downloadApp = { files, texts };
  </script>
</body>
</html>
